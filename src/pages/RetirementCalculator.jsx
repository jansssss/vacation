import React, { useMemo, useState } from "react";
import CalculatorTemplate from "../components/CalculatorTemplate";
import { calculateSeverancePay } from "../lib/calculators/severancePay";
import { formatCurrency, formatNumber } from "../lib/formatters";
import { RULES_2026 } from "../config/rules/2026";

const RetirementCalculator = () => {
  const [avgMonthlyWage, setAvgMonthlyWage] = useState(3000000);
  const [years, setYears] = useState(3);
  const [months, setMonths] = useState(0);

  const result = useMemo(() => {
    return calculateSeverancePay({ avgMonthlyWage, years, months });
  }, [avgMonthlyWage, years, months]);

  const summaryLines = result && !result.error
    ? [
        `????쭜 ??怨몄땋?? ${formatCurrency(result.pay)}`,
        `?잙????몃Ь?⑤슣?? ${years}??${months}?띠룇裕??(??琉얩뀰 ${formatNumber(result.serviceYears)}??`,
        `?????熬곥룊????⑥ъ젧 ?リ옇?쀨? 嶺뚣끉裕??${result.averageWagePeriodMonths}?띠룇裕???リ옇??`,
      ]
    : [
        "?????熬곥룊????잙????몃Ь?⑤슣??????놁졑??濡?듆 ????쭜 ??怨몄땋?ル?????ｌ뫒亦??紐껊퉵??",
        "?筌????⑤챶????⑥ъ궋??濡ル샬 ??????????ル留⑵굢????쒑굢???筌먦끉逾??琉얠돪??",
        "?뺢퀡踰?????堉???熬곣뫗????롪퍔????熬곣뱭?泥? ??⑤８堉??雅?굝????紐껊퉵??",
      ];

  const steps = [
    `嶺뚣끉裕??${RULES_2026.severancePay.averageWagePeriodMonths}?띠룇裕???????熬곥룊?????놁졑`,
    `?잙????몃Ь?⑤슣??${years}??${months}?띠룇裕???????關留꾢슖???琉얩뀰`,
    `?????熬곥룊?????잙?????⑥ル빢??????쭜 ??怨몄땋????ｌ뫒亦?,
  ];

  const exceptions = [
    "1??亦껋꼶梨뜹퐲??잙??????踰?嶺뚯솘?????븐럡??? ??ｌ뫒???筌먐븍Ф????⑤벡逾?????륁???????곕????덈펲.",
    "??⑤챶?곁뼨???⑥ъ궋??濡ル샬??嶺뚣끉裕??3?띠룇裕????????琉???? ?筌먦끉逾???熬곣뫗???紐껊퉵??",
    "??怨몄땋 嶺뚯쉳????ル留⑵굢??곌떠????됰턄 ???깅さ嶺??????熬곥룊????⑥ъ젧????⑤갭???繞벿살뵯???",
    "??怨몄땋/??怨룹뵜 ?リ옇?쀨?? ?????熬곥룊????⑥ъ젧 ??戮곕뇶 ???????⑤벡夷??筌먦끉逾??怨룻뒍 ??紐껊퉵??",
    "??怨몄땋??⑤슦???띠럾?????驪??? 嶺뚯솘????꾩렮維?????? ?????곕????덈펲.",
  ];

  const cases = [
    "??? 1) 嶺뚣끉裕??3?띠룇裕???????熬곥룊??3,200,000?? ?잙????4?? ????쭜 ??怨몄땋??12,800,000?? ??⑤챶????⑥ъ궋??濡ル샬 ??????????ル留⑵굢????쒑굢???筌먦끉逾?",
    "??? 2) ?잙????11?띠룇裕????怨댄뀬: ??????⑤챷紐드슖???怨몄땋??????⑤챶?????戮곕뇶???????깅さ????ｌ뫒???筌먐븍Ф/??? ?筌먦끉逾??熬곣뫗??",
    "??? 3) ??怨몄땋 嶺뚯쉳???2?띠룇裕???ル留⑵굢?泥? 10% ?筌뤾쑨留???롪퍔??? ?????熬곥룊????ｌ뫒亦??リ옇?????????????쭜???뚮턄 嶺뚯빘鍮????????깅쾳.",
  ];

  const faqs = [
    {
      question: "??怨몄땋?ル?? ?筌뤾쑴??嶺뚯솘??ル留ら뜮????濡る룎??",
      answer: "???留???怨몄땋??怨쀬Ŧ?遊붋??14?????亦?嶺뚯솘??ル留???????????????????????⑤벡逾???얜?踰???????곕????덈펲.",
    },
    {
      question: "?????熬곥룊????⑥ъ젧????⑤챶?곁뼨?????????濡る룎??",
      answer: "嶺뚣끉裕??3?띠룇裕?????筌????⑤챶?경뤆?쎛 ???덈펲嶺???????????곗꽑 ?ル留⑵굢???????筌먦끉逾??怨룻뒍 ??紐껊퉵??",
    },
    {
      question: "??⑥ъ궋??濡ル샬???????熬곥룊????????濡る룎??",
      answer: "?筌????⑤챷紐드슖?嶺뚯솘??ル留㎫뵳????⑥ъ궋??濡ル샬?? ?????熬곥룊????꾩룇瑗????????곕????덈펲.",
    },
    {
      question: "1??亦껋꼶梨뜹퐲??잙??????裕???怨몄땋?ル????꾩룇猷???????㏓룎??",
      answer: "??怨쀫틮??⑤챷紐드슖?1????怨대쭜 ?잙??????リ옇?????嶺????깅뇶?띠럾? ???깅굵 ?????곗꽑 ?筌먦끉逾???熬곣뫗???紐껊퉵??",
    },
    {
      question: "??怨몄땋 嶺뚯쉳????ル留⑵굢?泥? ?????곌떠????뽦뵹嶺?????됰ŀ移???濡る룎??",
      answer: "?????熬곥룊????⑥ъ젧 ?リ옇?쀨????곌떠????됰턄 ?꾩룇瑗????????ｌ뫒亦??롪퍒???쒖쾸? ????륁???????곕????덈펲.",
    },
    {
      question: "?????熬곥룊????⑥ъ젧 ?リ옇?쀨?? ????됰ŀ移???ｌ뫒亦??濡る룎??",
      answer: "???留???怨몄땋????怨몄쓧 3?띠룇裕????熬곥룊????リ옇????怨쀬Ŧ ??紐껊퉵??",
    },
    {
      question: "??怨몄땋??⑤슦??DB/DC) ?띠럾???????ｌ뫒亦?????섎꿩뤆?쎛??",
      answer: "嶺뚯솘????꾩렮維??뫢???ｌ뫒亦??リ옇??????? ?????곗꽑 ??類ｌ┣?????뉖????筌먦끉逾??怨룻뒍 ??紐껊퉵??",
    },
    {
      question: "??쒕뼬???怨몄땋 ?リ옇?쀨???????熬곥룊????????濡る룎??",
      answer: "??怨몄땋 ?リ옇?쀨???戮곕뇶 ??????잙?裕??겶???怨댄맍????⑤벡逾???? ?????곕????덈펲.",
    },
    {
      question: "??怨몄땋????ｌ뫒亦??롪퍒???? ???깆젷 嶺뚯솘??ル留⑶뇡?嶺뚢뼰維?議얠쾸? ???깅굵 ?????뉖룎??",
      answer: "?熬곥룊??????????????? ?잙??????⑥ъ젧 ?リ옇??????⑤벡逾?嶺뚢뼰維?議얠쾸? ?꾩룇裕뉑틦???????곕????덈펲.",
    },
    {
      question: "??ｌ뫒亦??롪퍒???좊ご???쒖굣?묐슙????戮깅???????濡る룎??",
      answer: "???? 嶺뚣볝늾???諭紐드슖???戮곕뮔???겶? ??ㅻ쾴????⑥ъ젧?? ?筌뤾쑨??? ?롪틵???? ?熬곣뫗???紐껊퉵??",
    },
  ];

  const sources = [
    "?잙??뽨빳?껊Ь???뺢퀡踰→묾???怨몄땋?ル留⑵굢???⑥ъ젧 ?リ옇??(??븐슜????⑤챷??",
    `?リ옇???? ${RULES_2026.effectiveDate} / ???낆몥??袁⑤콦: ${RULES_2026.updatedAt}`,
    "?????熬곥룊??????????? ?ル留⑵굢???鰲????亦??잙?裕???怨쀬Ŧ ?筌먦끉逾??熬곣뫗??,
  ];

  const relatedLinks = [
    { title: "??⑥れ빵 ??ｌ뫒亦낆렲臾?, path: "/calculators/annual-leave" },
    { title: "??怨몄땋??嶺뚯솘??????????堉??リ옇??", path: "/guides/severance-pay-eligibility" },
    { title: "?????熬곥룊????⑥ъ젧 ????????戮곕뇶 ????, path: "/guides/severance-pay-average-wage" },
    { title: "??怨몄땋???筌먦끆????類ㅼ쾼 嶺뚳퐢?얍칰類잙뎨????, path: "/guides/severance-pay-docs" },
    { title: "??⑥れ빵 ?リ옇????잙?裕????????븐슜??, path: "/guides/annual-leave-basics" },
    { title: "??쒕뼬???怨몄땋????⑥れ빵/??怨몄땋?ル?녻굢?亦껋꼶梨?????⑤갭??, path: "/guides/unpaid-leave-impact" },
    { title: "?ル留⑵굢?彛??얠돪?????덈츎 ??, path: "/guides/payroll-slip-reading" },
    { title: "??⑥れ빵??濡ル샬 ?筌먦끆??????됀?????댁쾼", path: "/guides/annual-leave-encashment" },
    { title: "??ｌ뫒亦낆렲臾????딅땹???????, path: "/calculators" },
  ];

  const trust = {
    checklist: [
      "嶺뚣끉裕??3?띠룇裕???ル留⑵굢???????잙??쎿틦??リ옇?▽빳??筌먲퐢沅?,
      "?筌????⑤챶????⑥ъ궋??濡ル샬 ??????? ?筌먦끉逾?,
      "?잙????몃Ь?⑤슣????⑥ъ젧 ?リ옇??????쒖굣???,
      "??怨몄땋??⑤슦??DB/DC) ????? 嶺뚯솘????꾩렮維???筌먦끉逾?,
      "??怨몄땋??嶺뚯솘?????源놁젧 ??嶺뚯솘?????怨룹뿴 ?롪틵???,
      "嶺뚯쉳??????닿뎄 ?????FAQ) ????繞벿뮻??,
    ],
    disputePoints: [
      "?????熬곥룊?????????????????怨댄맍 嶺뚢뼰維??,
      "1??亦껋꼶梨뜹퐲??잙??????踰?嶺뚯솘??????",
      "??怨몄땋 嶺뚯쉳????ル留⑵굢??곌떠????덊뱺 ??⑤틲???????熬곥룊????⑥ъ젧",
    ],
    notices: [
      "??怨몄땋????⑥ъ젧?? 嶺뚣끉裕??3?띠룇裕???????熬곥룊????リ옇????怨쀬Ŧ ???? ????????? ?ル留⑵굢????쒑굢???筌먦끉逾??紐껊퉵??",
      "??怨몄땋??嶺뚯솘?????源놁젧?? ??怨몄땋???リ옇?? 14?????亦?嶺뚯솘??????????????얜?踰ε슖??브퀗?????????곕????덈펲.",
      "??怨몄땋??⑤슦??DB/DC) ?띠럾????곸겱????類ｌ┣????⑥ъ젧 ?リ옇???????섎???곌랙?х뙴????뉖???嶺뚣볝늾????낅슣?섋땻??",
    ],
  };

  const breadcrumbs = [
    { label: "??, path: "/" },
    { label: "??ｌ뫒亦낆렲臾?, path: "/calculators" },
    { label: "??怨몄땋????ｌ뫒亦낆렲臾?, path: "/calculators/severance-pay" },
  ];

  return (
    <CalculatorTemplate
      seo={{
        title: "??怨몄땋????ｌ뫒亦낆렲臾?,
        description: "?????熬곥룊????잙????몃Ь?⑤슣??????놁졑??濡?듆 ????쭜 ??怨몄땋?ル?????節띉濡⑦돦熬곣뫁夷???ｌ뫒亦??紐껊퉵??",
        path: "/calculators/severance-pay",
      }}
      breadcrumbs={breadcrumbs}
      title="??怨몄땋????ｌ뫒亦낆렲臾?
      description="?????熬곥룊????잙????몃Ь?⑤슣??????놁졑??濡?듆 ????쭜 ??怨몄땋?ル?????ｌ뫒亦???겶? ??肉????깅뇶?? FAQ濚밸Ŧ?? ??蹂κ텢??紐껊퉵??"
      updatedAt={RULES_2026.updatedAt}
      summaryLines={summaryLines}
      steps={steps}
      exceptions={exceptions}
      cases={cases}
      faqs={faqs}
      sources={sources}
      relatedLinks={relatedLinks}
      trust={trust}
    >
      <div className="space-y-6">
        <div className="grid gap-4 md:grid-cols-3">
          <label className="text-sm text-slate-600 md:col-span-2">
            嶺뚣끉裕??3?띠룇裕???????熬곥룊??(??
            <input
              type="number"
              value={avgMonthlyWage}
              onChange={(event) => setAvgMonthlyWage(Number(event.target.value))}
              className="mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-right"
              min={0}
            />
          </label>
          <label className="text-sm text-slate-600">
            ?잙??????⑥ル빢 (??
            <input
              type="number"
              value={years}
              onChange={(event) => setYears(Number(event.target.value))}
              className="mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-right"
              min={0}
            />
          </label>
          <label className="text-sm text-slate-600">
            ?怨뺣뼺? ?잙????(?띠룇裕??
            <input
              type="number"
              value={months}
              onChange={(event) => setMonths(Number(event.target.value))}
              className="mt-2 w-full rounded-lg border border-slate-200 px-3 py-2 text-right"
              min={0}
              max={11}
            />
          </label>
        </div>

        {result && result.error && (
          <div className="rounded-xl border border-rose-100 bg-rose-50 p-4 text-sm text-rose-600">
            {result.error}
          </div>
        )}

        {!result.error && (
          <div className="rounded-xl border border-emerald-100 bg-emerald-50 p-4">
            <div className="flex items-baseline justify-between">
              <p className="text-sm text-emerald-700">????쭜 ??怨몄땋??/p>
              <p className="text-2xl font-semibold text-emerald-800">
                {formatCurrency(result.pay)}
              </p>
            </div>
            <div className="mt-4 space-y-2 text-sm text-slate-600">
              <div className="flex justify-between">
                <span>?잙????몃Ь?⑤슣????琉얩뀰</span>
                <span>{formatNumber(result.serviceYears)}??/span>
              </div>
              <div className="flex justify-between">
                <span>?????熬곥룊???リ옇??</span>
                <span>嶺뚣끉裕??{result.averageWagePeriodMonths}?띠룇裕??/span>
              </div>
            </div>
          </div>
        )}
      </div>
    </CalculatorTemplate>
  );
};

export default RetirementCalculator;
